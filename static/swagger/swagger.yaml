# Generated by: @appland/appmap openapi
#
# Customize the title with: --openapi-title
# Customize the version with: --openapi-version
# Customize this entire template with: --openapi-template
#
# 'paths' and 'components' will be populated automatically.
openapi: 3.0.1
info:
  title: Datalake Service
  version: 1.0.0
paths:
  /v1/healthz:
    get:
      responses:
        '200':
          content:
            application/json: {}
          description: OK
  /v1/load:
    get:
      summary: Load the data in the raw layer and send the wrong records to the log bucket then sync the cleaned data to redshift.
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: boolean
                    description: Success confirmation
                  message:
                    type: string
                    description: Success confirmation
            
        400:
          description: Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  body:
                    type: string
                    description: error message

  /v1/reload:
    post:
      summary: Restore certain table from raw_layer
      requestBody:
        required: True
        description: The table we want to restore.
        content:
          application/json:
              schema:
                type: object
                required:
                  - table_name
              example: {"table_name": "jobs"}
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: boolean
                    description: Success confirmation
                  message:
                    type: string
                    description: Success confirmation

  /v1/get-employees-by-quarter:
      get:
        summary: "Number of employees hired for each job and department in 2021 divided by quarter, ordered alphabetically by department and job."
        responses:
          200:
            description: Success
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    ok:
                      type: boolean
                      description: Success confirmation
                    data:
                      type: object
                      description: data result

  /v1/get-employees-more-than-media:
      get:
        summary: "List of ids, name and number of employees hired of each department that hired more employees than the mean of employees hired in 2021 for all the departments, ordered by the number of employees hired (descending)"
        responses:
          200:
            description: Success
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    ok:
                      type: boolean
                      description: Success confirmation
                    data:
                      type: object
                      description: data result