# Generated by: @appland/appmap openapi
#
# Customize the title with: --openapi-title
# Customize the version with: --openapi-version
# Customize this entire template with: --openapi-template
#
# 'paths' and 'components' will be populated automatically.
openapi: 3.0.1
info:
  title: Legal Entity Search
  version: 2.0.0
paths:
  /v2/search:
    post:
      summary: This service allows searching a company in all internal systems by name, address, and other input fields.
      requestBody:
        required: True
        description: The company that we want to search.
        content:
          application/json:
            schema:
              type: object
              required:
                - entity_key
                - entity_class
                - etl_date
                - api_name
                - path_top_level
                - file_name
                - metadata
              properties:
                config:
                  type: object
                  properties:
                    matching-method: 
                      type: string
                      description: "Enter the matching method to use in the searching process. The allowed values are: exact, fuzzy"
                    ignore: 
                      type: string
                      description: "Enter a field that is going to be excluded from the search. Use this only in combination with the exact matching method."
                data:
                  type: object
                  description: Data of the company to be search.
                  properties:
                    entity_key:
                      type: string
                      description: Optional input if we are doing an internal search. This refers to where the internal entity record is coming from. Omit this field for external searching.
                    entity_class:
                      type: string
                      description: Optional input if we are doing an internal search. This is the type of records (what database or entity type?) i.e. SFC, AR, Buyer, Seller. Omit this field for external searching.
                    legal_name:
                      type: string
                      description: Name of the company.
                    street_address:
                      type: string
                      description: Address of the company.
                    city:
                      type: string
                      description: City of the company.
                    state:
                      type: string
                      description: State of the company.
                    country:
                      type: string
                      description: Country of the company.
                    zip_code:
                      type: string
                      description: Zip code of the company address.



              example: {"config":
                            {"matching-method":"exact",
                              "ignore":""
                            },
                        "data":
                            [
                            {  "entity_key":"",
                                "entity_class":"",
                                "legal_name":"Stellabella Toys*",
                                "street_address":"1360 cambridge st",
                                "city":"Cambridge",
                                "state":"MA",
                                "country":"US",
                                "zip_code":"02139"},
                            {  "entity_key":"",
                                "entity_class":"",
                                "legal_name":"Stellabella Toys",
                                "street_address":"1366 cambridge st",
                                "city":"Cambridge",
                                "state":"MA",
                                "country":"US",
                                "zip_code":"02139"}
                            ]
                        }

      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: boolean
                    description: Success confirmation
                  message:
                    type: string
                    description: Success confirmation
                  data:
                    type: object
                    properties:
                      address_number:
                        type: string
                      address_number_ratio_score:
                        type: integer
                      city:
                        type: string
                      cleaned_entity_name:
                        type: string
                      country:
                        type: string
                      entity_class:
                        type: string
                      entity_id:
                        type: integer
                      entity_key:
                        type: string
                      entity_name:
                        type: string
                      full_address:
                        type: string
                      is_exact_address_match:
                        type: boolean
                      is_exact_match:
                        type: boolean
                      is_exact_name_match:
                        type: boolean
                      legal_name:
                        type: string
                      matched_address_number:
                        type: string
                      matched_city:
                        type: string
                      matched_cleaned_entity_name:
                        type: string
                      matched_country:
                        type: string
                      matched_entity_class:
                        type: string
                      matched_entity_id:
                        type: string
                      matched_entity_key:
                        type: string
                      matched_entity_name:
                        type: string
                      matched_full_address:
                        type: string
                      matched_legal_name:
                        type: string
                      matched_processed_name: 
                        type: string
                      matched_state:
                        type: string
                      matched_street_address:
                        type: string
                      matched_street_address_split:
                        type: string
                      matched_street_name:
                        type: string
                      matched_tagged_addresses:
                        type: object
                        properties:
                          AddressNumber:
                            type: string
                          CountryName:
                            type: string
                          PlaceName:
                            type: string
                          StateName:
                            type: string
                          StreetNamePostType:
                            type: string
                          ZipCode:
                            type: string
                      matched_zip_code:
                        type: string
                      matched_zip_code_abv:
                        type: string
                      name_partial_ratio_score:
                        type: integer
                      name_ratio_score:
                        type: integer
                      name_token_set_ratio_score:
                        type: integer
                      name_token_sort_ratio_score:
                        type: integer
                      processed_name:
                        type: string
                      state:
                        type: string
                      street_address:
                        type: string
                      street_address_split:
                        type: string
                      street_name:
                        type: string
                      street_name_ratio_score:
                        type: integer
                      tagged_addresses:
                        type: object
                        properties:
                          AddressNumber:
                            type: string
                          CountryName:
                            type: string
                          PlaceName:
                            type: string
                          StateName:
                            type: string
                          StreetNamePostType:
                            type: string
                          ZipCode:
                            type: string
                      zip_code:
                        type: string
                      zip_code_abv:
                        type: string
                      zip_code_ratio_score:
                        type: integer
                    example:
                        [
                        {
                            "address_number": "1360",
                            "address_number_ratio_score": 100,
                            "city": "cambridge",
                            "cleaned_entity_name": "stellabella toys",
                            "country": "us",
                            "entity_class": "",
                            "entity_id": 0,
                            "entity_key": "",
                            "entity_name": "Stellabella Toys*",
                            "full_address": "1360 cambridge st cambridge ma 02139 us",
                            "is_exact_address_match": true,
                            "is_exact_match": true,
                            "is_exact_name_match": true,
                            "legal_name": "Stellabella Toys*",
                            "matched_address_number": "1360",
                            "matched_city": "cambridge",
                            "matched_cleaned_entity_name": "stellabella toys",
                            "matched_country": "united states",
                            "matched_entity_class": "ar_buyer",
                            "matched_entity_id": 22204,
                            "matched_entity_key": "99984",
                            "matched_entity_name": "Stellabella Toys*",
                            "matched_full_address": "1360 cambridge st cambridge ma 02139 united states",
                            "matched_legal_name": "Stellabella Toys*",
                            "matched_processed_name": "stellabella toys",
                            "matched_state": "ma",
                            "matched_street_address": "1360 cambridge st",
                            "matched_street_address_split": "1360 cambridge st",
                            "matched_street_name": "None",
                            "matched_tagged_addresses": {
                                "AddressNumber": "1360",
                                "CountryName": "states",
                                "PlaceName": "cambridge",
                                "StateName": "ma",
                                "StreetNamePostType": "st",
                                "ZipCode": "02139"
                            },
                            "matched_zip_code": "02139",
                            "matched_zip_code_abv": "02139",
                            "name_partial_ratio_score": 100,
                            "name_ratio_score": 100,
                            "name_token_set_ratio_score": 100,
                            "name_token_sort_ratio_score": 100,
                            "processed_name": "stellabella toys",
                            "state": "ma",
                            "street_address": "1360 cambridge st",
                            "street_address_split": "1360 cambridge st",
                            "street_name": "None",
                            "street_name_ratio_score": 100,
                            "tagged_addresses": {
                                "AddressNumber": "1360",
                                "CountryName": "us",
                                "PlaceName": "cambridge",
                                "StateName": "ma",
                                "StreetNamePostType": "st",
                                "ZipCode": "02139"
                            },
                            "zip_code": "02139",
                            "zip_code_abv": "02139",
                            "zip_code_ratio_score": 100
                        },
                        {
                            "address_number": "1360",
                            "address_number_ratio_score": 100,
                            "city": "cambridge",
                            "cleaned_entity_name": "stellabella toys",
                            "country": "us",
                            "entity_class": "",
                            "entity_id": 0,
                            "entity_key": "",
                            "entity_name": "Stellabella Toys*",
                            "full_address": "1360 cambridge st cambridge ma 02139 us",
                            "is_exact_address_match": true,
                            "is_exact_match": true,
                            "is_exact_name_match": true,
                            "legal_name": "Stellabella Toys*",
                            "matched_address_number": "1360",
                            "matched_city": "cambridge",
                            "matched_cleaned_entity_name": "stellabella toys",
                            "matched_country": "united states",
                            "matched_entity_class": "ar_buyer",
                            "matched_entity_id": 22205,
                            "matched_entity_key": "131228",
                            "matched_entity_name": "Stellabella Toys",
                            "matched_full_address": "1360 cambridge street cambridge ma 02139 united states",
                            "matched_legal_name": "Stellabella Toys",
                            "matched_processed_name": "stellabella toys",
                            "matched_state": "ma",
                            "matched_street_address": "1360 cambridge street",
                            "matched_street_address_split": "1360 cambridge street",
                            "matched_street_name": "None",
                            "matched_tagged_addresses": {
                                "AddressNumber": "1360",
                                "CountryName": "states",
                                "PlaceName": "cambridge",
                                "StateName": "ma",
                                "StreetNamePostType": "street",
                                "ZipCode": "02139"
                            },
                            "matched_zip_code": "02139",
                            "matched_zip_code_abv": "02139",
                            "name_partial_ratio_score": 100,
                            "name_ratio_score": 100,
                            "name_token_set_ratio_score": 100,
                            "name_token_sort_ratio_score": 100,
                            "processed_name": "stellabella toys",
                            "state": "ma",
                            "street_address": "1360 cambridge st",
                            "street_address_split": "1360 cambridge st",
                            "street_name": "None",
                            "street_name_ratio_score": 100,
                            "tagged_addresses": {
                                "AddressNumber": "1360",
                                "CountryName": "us",
                                "PlaceName": "cambridge",
                                "StateName": "ma",
                                "StreetNamePostType": "st",
                                "ZipCode": "02139"
                            },
                            "zip_code": "02139",
                            "zip_code_abv": "02139",
                            "zip_code_ratio_score": 100
                        }
                    ]
                    description: Company data
        404:
          description: Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  body:
                    type: string
                    description: Not found

